(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2315a5"],{efd2:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"tw-body"},[s("div",{staticClass:"tw-body-inner xcontainer"},[s("div",{directives:[{name:"bottom",rawName:"v-bottom",value:70,expression:"70"}],staticClass:"tw-body-content"},[s("div",{staticClass:"tw-title"},[t._m(0),s("div",{staticClass:"tw-title-right"},[s("tw-api-select",{attrs:{api:t.$api.user.getUsernames,size:"small",clearable:"",filterable:"","option-value-key":"id",placeholder:"按开发人员过滤"},on:{change:function(e){return t.$api.project.getPlansByUserId.send()}},model:{value:t.$api.project.getPlansByUserId.params.developer_id,callback:function(e){t.$set(t.$api.project.getPlansByUserId.params,"developer_id",e)},expression:"$api.project.getPlansByUserId.params.developer_id"}}),s("el-checkbox",{staticClass:"mx-small",on:{change:function(e){return t.$api.project.getProjects.send()}},model:{value:t.hideDoneTask,callback:function(e){t.hideDoneTask=e},expression:"hideDoneTask"}},[t._v("隐藏已完成的任务")]),t.$api.project.getPlansByUserId.params.developer_id===t.$app.user.userId||[t.$cnt.ROLE_TEAM_LEADER].includes(t.$app.user.role)?[t.progressInputVisibal?s("a",{staticClass:"text-link",on:{click:function(e){t.progressInputVisibal=!1}}},[t._v("修改完成")]):s("a",{staticClass:"text-link",on:{click:function(e){t.progressInputVisibal=!0}}},[t._v("修改进度")])]:t._e()],2)]),s("div",[s("table",{staticClass:"tw-table xnowrap xprogress"},[t._m(1),s("tbody",[t._l(t.plans,(function(e,a){return[0===a||t.plans[a].project_name!==t.plans[a-1].project_name?s("tr",{key:a},[s("td",{staticClass:"text-bold",attrs:{colspan:"8"}},[s("span",{staticStyle:{"margin-left":"-15px"}},[t._v(t._s(e.project_name))]),s("router-link",{staticClass:"text-link text-normal text-small",attrs:{to:"/project-detail?id="+e.project_id}},[t._v("（项目详情）")])],1)]):t._e(),s("tr",{key:e.id},[s("td",[t._v(t._s(a+1))]),s("td",[t._v(t._s(e.task_name))]),s("td",[t._v(t._s(e.developer_name))]),s("td",[t.progressInputVisibal&&(e.developer_id===t.$app.user.userId||[t.$cnt.ROLE_TEAM_LEADER].includes(t.$app.user.role))?s("el-select",{attrs:{size:"mini"},on:{change:function(s){return t.$api.project.updatePlan.send({id:e.id,progress:e.progress})}},model:{value:e.progress,callback:function(s){t.$set(e,"progress",s)},expression:"plan.progress"}},t._l(t.$dic.progressList,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1):s("el-progress",{attrs:{percentage:100*e.progress,format:t.format,color:"risky"===e.status?"#f56c6c":"#218fff"}})],1),s("td",[t._v(t._s(t.$dic.select(t.$api.dic.degreens.data.list,e.degreen,"degreen_name")))]),s("td",[t._v(t._s(e.task_time))]),s("td",[t._v(t._s(t.$ui.dateFormat(e.start_time,"yyyy-mm-dd HH:MM")))]),s("td",[t._v(t._s(t.$ui.dateFormat(e.end_time,"yyyy-mm-dd HH:MM")))])])]}))],2)])])])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",{staticClass:"tw-title-left text-default"},[s("span",[t._v("任务列表")]),s("span",{staticClass:"text-small text-weaking"},[t._v("(仅显示未结束项目的任务)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticStyle:{width:"4em"}},[t._v("序号")]),s("th",{staticStyle:{width:"300px"}},[t._v("任务名称")]),s("th",[t._v("开发")]),s("th",{staticStyle:{width:"150px"}},[t._v("进度")]),s("th",[t._v("难度等级")]),s("th",{staticStyle:{width:"70px"}},[t._v("工时")]),s("th",{staticStyle:{width:"130px"}},[t._v("计划开始时间")]),s("th",{staticStyle:{width:"130px"}},[t._v("计划完成时间")])])])}],i={name:"page-task-list",data:function(){return{hideDoneTask:!1,progressInputVisibal:!1}},computed:{plans:function(){var t=this.$api.project.getPlansByUserId.data.list;return this.hideDoneTask?t.filter((function(t){return t.progress<1})):t}},methods:{format:function(t){return"".concat(t,"%")}},created:function(){this.$api.project.getPlansByUserId.send()}},n=i,l=s("9ca4"),o=Object(l["a"])(n,a,r,!1,null,null,null);e["default"]=o.exports}}]);